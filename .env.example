# Market Data Service Environment Configuration

# Database
DATABASE_URL=postgresql://marketdata:marketdata@localhost:5432/marketdata

# API
API_HOST=0.0.0.0
API_PORT=8100

# Bitfinex configuration
BITFINEX_SYMBOLS=BTCUSD,ETHUSD,SOLUSD
BITFINEX_TIMEFRAMES=1h,4h,1d

# Daemon settings
BACKFILL_ON_STARTUP=true
BACKFILL_DAYS=365

# Scheduled gap repair (see docs/SCHEDULING.md)
GAP_REPAIR_INTERVAL_MINUTES=60
GAP_DETECTION_INTERVAL_MINUTES=60
GAP_REPAIR_MAX_REPAIRS_PER_RUN=10
GAP_DETECTION_MAX_OPEN_GAPS=0

# Periodic REST updates (usually disabled when WebSocket enabled)
REST_UPDATE_ENABLED=false
UPDATE_INTERVAL_SECONDS=60

# WebSocket real-time ingestion (prevents new gaps)
WS_INGESTION_ENABLED=true
WS_CATCHUP_LOOKBACK_MINUTES=180

# Health check
HEALTH_CHECK_INTERVAL_SECONDS=30

# Rate limiting (Bitfinex: ~10-90 req/min depending on endpoint)
RATE_LIMIT_DELAY=6.0
RATE_LIMIT_MAX_RETRIES=10
RATE_LIMIT_MIN_BACKOFF_SECONDS=60.0
